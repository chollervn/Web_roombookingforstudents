<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{admin/admin_base::adminLayout(~{::section})}">
<head>
<meta charset="UTF-8">
<title>Quản lý người dùng</title>
</head>
<body>
	<section th:with="currentPage='users'">
		<style>
			.page-header {
				margin-bottom: 30px;
			}
			.page-header h2 {
				font-size: 28px;
				color: #2c3e50;
				margin-bottom: 10px;
			}
			.table-card {
				background: white;
				padding: 25px;
				border-radius: 12px;
				box-shadow: 0 2px 8px rgba(0,0,0,0.08);
			}
			.profile-img {
				width: 70px;
				height: 70px;
				border-radius: 50%;
				object-fit: cover;
			}
		</style>

		<div class="page-header">
			<h2><i class="fas fa-users"></i> Người thuê trọ</h2>
		</div>

		<th:block th:if="${session.succMsg}">
			<div class="alert alert-success alert-dismissible fade show">
				[[${session.succMsg}]]
				<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
			</div>
			<th:block th:text="${@commonServiceImpl.removeSessionMessage()}"></th:block>
		</th:block>

		<th:block th:if="${session.errorMsg}">
			<div class="alert alert-danger alert-dismissible fade show">
				[[${session.errorMsg}]]
				<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
			</div>
			<th:block th:text="${@commonServiceImpl.removeSessionMessage()}"></th:block>
		</th:block>

		<div class="table-card">
			<div class="table-responsive">
				<table class="table table-hover table-bordered">
					<thead class="table-light">
						<tr>
							<th scope="col">STT</th>
							<th scope="col">Ảnh đại diện</th>
							<th scope="col">Họ tên</th>
							<th scope="col">Email</th>
							<th scope="col">Số điện thoại</th>
							<th scope="col">Địa chỉ</th>
							<th scope="col">Trạng thái</th>
							<th scope="col">Hành động</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="u,c:${users}">
							<th scope="row">[[${c.count}]]</th>
							<td>
								<img th:src="@{'/uploads/profile_img/'+${u.profileImage}}"
									class="profile-img" onerror="this.src='/uploads/profile_img/default.jpg'">
							</td>
							<td><strong>[[${u.name}]]</strong></td>
							<td>[[${u.email}]]</td>
							<td>[[${u.mobileNumber}]]</td>
							<td>[[${u.address}]]</td>
							<td>
								<span th:if="${u.isEnable}" class="badge bg-success">
									<i class="fas fa-check-circle"></i> Hoạt động
								</span>
								<span th:unless="${u.isEnable}" class="badge bg-danger">
									<i class="fas fa-times-circle"></i> Vô hiệu
								</span>
							</td>
							<td>
								<a th:href="@{'/admin/updateSts?status=true&id='+${u.id}}+'&type='+${userType}"
									class="btn btn-sm btn-success">
									<i class="fas fa-check"></i> Kích hoạt
								</a>
								<a th:href="@{'/admin/updateSts?status=false&id='+${u.id}}+'&type='+${userType}"
									class="btn btn-sm btn-danger">
									<i class="fas fa-ban"></i> Vô hiệu hóa
								</a>
							</td>
						</tr>
						<tr th:if="${#lists.isEmpty(users)}">
							<td colspan="8" class="text-center py-5">
								<i class="fas fa-inbox fa-3x text-muted mb-3"></i>
								<p class="text-muted">Chưa có người thuê trọ nào</p>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

	</section>
</body>
</html>
