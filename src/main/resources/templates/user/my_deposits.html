<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section})}">
<head>
<meta charset="UTF-8">
<title>Đơn đặt cọc của tôi</title>
</head>
<body>
<section style="padding-top: 90px; min-height: 70vh;">
	<div class="container mt-3 p-3">
		<div class="card card-sh">
			<div class="card-header text-center bg-primary text-white">
				<h4><i class="fas fa-list-alt"></i> Đơn đặt cọc của tôi</h4>
			</div>

			<div class="card-body">
				<div th:if="${deposits.isEmpty()}" class="text-center py-5">
					<i class="fas fa-inbox fa-5x text-muted mb-3"></i>
					<h5 class="text-muted">Bạn chưa có đơn đặt cọc nào</h5>
					<a href="/user/cart" class="btn btn-primary mt-3">
						<i class="fas fa-search"></i> Tìm phòng trọ
					</a>
				</div>

				<div th:if="${!deposits.isEmpty()}" class="table-responsive">
					<table class="table table-hover table-bordered">
						<thead class="table-light">
							<tr>
								<th>STT</th>
								<th>Phòng trọ</th>
								<th>Địa chỉ</th>
								<th>Số tiền</th>
								<th>Ngày đặt cọc</th>
								<th>Phương thức</th>
								<th>Trạng thái</th>
								<th>Ghi chú admin</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="deposit, iterStat : ${deposits}">
								<td th:text="${iterStat.count}">1</td>
								<td>
									<strong th:text="${deposit.room.roomName}">Tên phòng</strong><br>
									<small class="text-muted">
										Chủ trọ: <span th:text="${deposit.room.contactName}">Chủ trọ</span><br>
										SĐT: <span th:text="${deposit.room.contactPhone}">0900...</span>
									</small>
								</td>
								<td><small th:text="${deposit.room.fullAddress}">Địa chỉ</small></td>
								<td class="text-end">
									<strong class="text-success" th:text="${#numbers.formatDecimal(deposit.amount, 0, 'COMMA', 0, 'POINT')}">0</strong> VNĐ
								</td>
								<td th:text="${#temporals.format(deposit.depositDate, 'dd/MM/yyyy')}">--/--/----</td>
								<td>
									<span th:if="${deposit.paymentMethod == 'CASH'}" class="badge bg-secondary">
										<i class="fas fa-money-bill"></i> Tiền mặt
									</span>
									<span th:if="${deposit.paymentMethod == 'BANK_TRANSFER'}" class="badge bg-info">
										<i class="fas fa-university"></i> Chuyển khoản
									</span>
									<span th:if="${deposit.paymentMethod == 'E_WALLET'}" class="badge bg-primary">
										<i class="fas fa-wallet"></i> Ví điện tử
									</span>
								</td>
								<td>
									<span th:if="${deposit.status == 'PENDING'}" class="badge bg-warning text-dark">
										<i class="fas fa-clock"></i> Chờ xác nhận
									</span>
									<span th:if="${deposit.status == 'APPROVED'}" class="badge bg-success">
										<i class="fas fa-check"></i> Đã xác nhận
									</span>
									<span th:if="${deposit.status == 'REJECTED'}" class="badge bg-danger">
										<i class="fas fa-times"></i> Đã từ chối
									</span>
									<span th:if="${deposit.status == 'REFUNDED'}" class="badge bg-secondary">
										<i class="fas fa-undo"></i> Đã hoàn cọc
									</span>
								</td>
								<td>
									<small th:if="${deposit.adminNote != null and !deposit.adminNote.isEmpty()}"
										th:text="${deposit.adminNote}" class="text-muted">Ghi chú</small>
									<span th:if="${deposit.adminNote == null or deposit.adminNote.isEmpty()}"
										class="text-muted">--</span>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

			<div class="card-footer text-center">
				<a href="/user/" class="btn btn-secondary">
					<i class="fas fa-home"></i> Về trang chủ
				</a>
				<a href="/user/cart" class="btn btn-primary">
					<i class="fas fa-search"></i> Tìm phòng trọ
				</a>
			</div>
		</div>
	</div>
</section>
</body>
</html>

